"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[147],{147:(s,t,e)=>{e.r(t),e.d(t,{default:()=>I});var a=e(43),r=e(598);const i={main:"InfoProfile_main__8bIRx",ava:"InfoProfile_ava__Ui5kv",status:"InfoProfile_status__MpLO9",aboutme:"InfoProfile_aboutme__npv1j"};var o=e(579);const l=s=>{const[t,e]=(0,a.useState)(!1),[r,l]=(0,a.useState)(s.status);(0,a.useEffect)((()=>{l(s.status)}),[s.status]);return(0,o.jsxs)("div",{className:i.status,children:[!t&&(0,o.jsx)("div",{children:(0,o.jsx)("span",{onDoubleClick:()=>{e(!0)},children:s.status||"--"})}),t&&(0,o.jsx)("div",{children:(0,o.jsx)("input",{autoFocus:!0,onBlur:()=>{e(!1),s.updateStatus(r)},onChange:s=>{l(s.target.value)},value:r})})]})},n=s=>{let{profile:t,status:e,updateStatus:a}=s;return t?(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:i.main}),(0,o.jsxs)("div",{className:i.ava,children:[(0,o.jsx)("div",{children:(0,o.jsx)("h2",{className:i.name,children:t.fullName})}),(0,o.jsx)("img",{src:t.photos.large,alt:"wall"}),(0,o.jsx)(l,{status:e,updateStatus:a,className:i.status}),(0,o.jsx)("div",{children:t.contacts.facebook}),(0,o.jsx)("div",{children:t.contacts.vk}),(0,o.jsx)("div",{children:t.contacts.twitter})]})]}):(0,o.jsx)(r.A,{})};var c=e(477),d=e(3),u=e(892);const h={item:"Post_item__W5CBq",likes:"Post_likes__WKbkj"},m=s=>(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:h.posts,children:[(0,o.jsxs)("div",{className:h.item,children:[(0,o.jsx)("img",{src:"https://images.unsplash.com/photo-1475518112798-86ae358241eb?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"avatar"}),s.message]}),(0,o.jsx)("div",{className:h.likes,children:(0,o.jsx)("span",{children:s.like})})]})});var x=e(899);const p=x.Ik().shape({post:x.Yj().min(1,"Post must be at least 10 characters").max(100,"Must be shorter than 10000 characters").required("Post is required")});var _=e(304);const j="MyPosts_postBlock__a8-sP",f="MyPosts_form__container__Yt4-k",v="MyPosts_form__post__YT1F5",k="MyPosts_textarea__post__rxtpn",P="MyPosts_buttonPost__eBhN5",b="MyPosts_buttonPostDisabled__5XkXZ",g=()=>{const s=(0,d.wA)();return(0,o.jsx)(u.l1,{initialValues:{post:""},validationSchema:p,onSubmit:(t,e)=>{let{resetForm:a}=e;s((0,c.oL)(t.post)),a()},children:s=>{let{isValid:t}=s;return(0,o.jsxs)(u.lV,{className:v,children:[(0,o.jsx)("div",{className:f,children:(0,o.jsx)(u.D0,{className:k,component:_.T,name:"post",placeholder:"Post message"})}),(0,o.jsx)("div",{children:(0,o.jsx)("button",{className:`${P} ${t?"":b}`,type:"submit",disabled:!t,children:"Add Post"})})]})}})},N=()=>{let s=(0,d.d4)((s=>s.profile.posts)).map((s=>(0,o.jsx)(m,{message:s.message,like:s.likesCount},s.id)));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:j,children:(0,o.jsx)("h3",{children:"My posts"})}),(0,o.jsx)("div",{children:(0,o.jsx)(g,{})}),s]})},S=(0,d.Ng)((s=>({posts:s.profile.posts})),(s=>({addPost:()=>{s((0,c.oL)())}})))(N),M=s=>(0,o.jsxs)("div",{children:[(0,o.jsx)(n,{profile:s.profile,status:s.status,updateStatus:s.updateStatus}),(0,o.jsx)(S,{})]});var w=e(216);const I=(0,e(923).Zz)((0,d.Ng)((s=>({profile:s.profile.profile,status:s.profile.status,authorizedUserId:s.auth.userId,isAuth:s.auth.isAuth})),{getUserProfile:c.VM,getStatus:c.BS,updateStatus:c.yB}))((function(s){const{userId:t}=(0,w.g)(),e=(0,w.Zp)(),r=t||s.authorizedUserId;return(0,a.useEffect)((()=>{s.isAuth?(s.getUserProfile(r),s.getStatus(r)):e("/login")}),[r,s.isAuth,e]),(0,o.jsx)("div",{children:(0,o.jsx)(M,{...s,profile:s.profile,status:s.status,updateStatus:s.updateStatus})})}))},304:(s,t,e)=>{e.d(t,{p:()=>c,T:()=>n});e(43);const a="FormsControls_form-control__KOICr",r="FormsControls_error__wukgD",i="FormsControls_formField__Z4Rfv";var o=e(579);const l=s=>{let{field:t,form:e,...i}=s;const l=e.touched[t.name]&&e.errors[t.name];return(0,o.jsxs)("div",{className:a+" "+(l?r:""),children:[(0,o.jsx)("div",{children:i.children}),l&&(0,o.jsx)("span",{children:e.errors[t.name]})]})},n=s=>{const{field:t,form:e,child:a,...r}=s;return(0,o.jsx)(l,{...s,children:(0,o.jsx)("textarea",{...t,...r})})},c=s=>{const{field:t,form:e,child:a,...r}=s;return(0,o.jsx)(l,{...s,children:(0,o.jsx)("div",{className:i,children:(0,o.jsx)("input",{...t,...r})})})}}}]);
//# sourceMappingURL=147.d021361c.chunk.js.map